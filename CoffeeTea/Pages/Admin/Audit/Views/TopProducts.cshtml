@model List<CoffeeTea.Pages.Admin.Audit.Models.TopProductVm>
@{
    Layout = "~/Pages/Views/Shared/_Layout.cshtml";
    ViewData["Title"] = "–¢–æ–ø —Ç–æ–≤–∞—Ä—ã";
}

<div class="container py-5">
    <div class="d-flex justify-content-between align-items-center mb-4">
        <h1 class="h3 fw-bold"><i class="fas fa-chart-line me-2"></i> –¢–æ–ø —Ç–æ–≤–∞—Ä—ã</h1>
        <a href="/admin/audit" class="btn btn-outline-secondary rounded-pill">
            <i class="fas fa-arrow-left me-1"></i> –ö –∂—É—Ä–Ω–∞–ª—É –∞—É–¥–∏—Ç–∞
        </a>
    </div>

    @if (ViewBag.Error != null)
    {
        <div class="alert alert-danger" role="alert">
            @ViewBag.Error
        </div>
    }

    <div class="card border-0 rounded-4 shadow-sm">
        <div class="card-body">
            <div class="table-responsive">
                <table class="table align-middle">
                    <thead>
                        <tr>
                            <th>‚Ññ</th>
                            <th>–ù–∞–∑–≤–∞–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞</th>
                            <th class="text-end">–ü—Ä–æ–¥–∞–Ω–æ (—à—Ç.)</th>
                            <th class="text-end">–í—ã—Ä—É—á–∫–∞ (‚ÇΩ)</th>
                        </tr>
                    </thead>
                    <tbody>
                        @if (Model.Count == 0)
                        {
                            <tr>
                                <td colspan="4" class="text-center text-muted py-4">
                                    –î–∞–Ω–Ω—ã–µ –Ω–µ –Ω–∞–π–¥–µ–Ω—ã
                                </td>
                            </tr>
                        }
                        else
                        {
                            var index = 1;
                            @foreach (var product in Model)
                            {
                                <tr>
                                    <td>
                                        @if (index == 1)
                                        {
                                            <span class="badge bg-warning text-dark fs-5">ü•á @index</span>
                                        }
                                        else if (index == 2)
                                        {
                                            <span class="badge bg-secondary fs-5">ü•à @index</span>
                                        }
                                        else if (index == 3)
                                        {
                                            <span class="badge bg-danger fs-5">ü•â @index</span>
                                        }
                                        else
                                        {
                                            <span>@index</span>
                                        }
                                    </td>
                                    <td>
                                        <strong>@product.ProductName</strong>
                                        <br />
                                        <small class="text-muted">ID: @product.ProductId</small>
                                    </td>
                                    <td class="text-end">
                                        <span class="badge bg-info fs-6">@product.TotalSold</span>
                                    </td>
                                    <td class="text-end">
                                        <span class="text-success fw-bold">@product.Revenue.ToString("N2") ‚ÇΩ</span>
                                    </td>
                                </tr>
                                index++;
                            }
                        }
                    </tbody>
                    @if (Model.Count > 0)
                    {
                        <tfoot>
                            <tr class="fw-bold">
                                <td colspan="2" class="text-end">–ò–¢–û–ì–û:</td>
                                <td class="text-end">@Model.Sum(p => p.TotalSold)</td>
                                <td class="text-end text-success">@Model.Sum(p => p.Revenue).ToString("N2") ‚ÇΩ</td>
                            </tr>
                        </tfoot>
                    }
                </table>
            </div>
        </div>
    </div>
</div>
